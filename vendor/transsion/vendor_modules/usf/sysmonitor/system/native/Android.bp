// ---------------------------------------------------------------------------
// libsysmonitor_jni â€” JNI bridge (system_ext partition)
//   Loaded by SysMonitorBridge.java inside the system Java process.
//   Reads MetricStore via ashmem (zero-copy); pushes Java metrics via AIDL.
// ---------------------------------------------------------------------------
cc_library_shared {
    name: "libsysmonitor_jni",
    system_ext_specific: true,

    cflags: [
        "-Wall",
        "-Wextra",
        "-Werror",
        "-O2",
        "-fno-exceptions",
        "-fno-rtti",
    ],

    srcs: [
        "jni/SysMonitorJNI.cpp",
    ],

    local_include_dirs: [
        "vendor/core/include",       // MetricStore.h, MetricDef.h
        "vendor/platform/include",   // SysMonLog.h (optional)
    ],

    shared_libs: [
        "liblog",
        "libcutils",
        "libbase",
        "libnativehelper",
        "libandroid_runtime",
        "libandroid",                // ASharedMemory_*
        "libbinder_ndk",
        // AIDL NDK backend (for ISysMonitor client calls)
        "vendor.transsion.hardware.sysmonitor-V1-ndk",
    ],
}
